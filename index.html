<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">

<!-- RESPONSIVE -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Hojas de Seguridad â€“ Austral Group S.A.A.</title>

<style>
:root{
  --azul:#003b71;
}

*{
  box-sizing:border-box;
}

body{
  margin:0;
  font-family:Segoe UI, Arial;
  background:#f4f6f9;
}

header{
  background:var(--azul);
  color:white;
  padding:18px 30px;
}

header h1{
  margin:0;
  font-size:22px;
}

.container{
  padding:25px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:20px;
  margin-bottom:20px;
}

.card{
  background:white;
  border-radius:8px;
  padding:15px;
  box-shadow:0 2px 6px rgba(0,0,0,.1);
}

.card h3{
  margin-top:0;
  color:var(--azul);
}

select{
  width:100%;
  padding:10px;
  border-radius:5px;
  border:1px solid #ccc;
  font-size:14px;
}

#visor{
  width:100%;
  height:70vh; /* antes fijo 600px */
  border:none;
  border-radius:8px;
  box-shadow:0 2px 6px rgba(0,0,0,.15);
}

footer{
  margin-top:15px;
  font-size:12px;
  color:#666;
  text-align:center;
}

/* CELULAR */
@media(max-width:600px){

header{
  padding:12px 15px;
}

header h1{
  font-size:16px;
}

.container{
  padding:12px;
}

.grid{
  grid-template-columns:1fr;
}

select{
  padding:12px;
  font-size:15px;
}

#visor{
  height:65vh;
}

}
</style>
</head>

<body>

<header>
  <h1>ðŸ“„ Sistema de Hojas de Seguridad â€“ Austral Group S.A.A.</h1>
</header>

<div class="container">

<div class="grid">

  <div class="card">
    <h3>ðŸ§ª Insumos</h3>
    <select id="insumos"></select>
  </div>

  <div class="card">
    <h3>ðŸŽ¨ Pintura</h3>
    <select id="pintura"></select>
  </div>

  <div class="card">
    <h3>â›½ Combustibles</h3>
    <select id="combustibles"></select>
  </div>

</div>

<iframe id="visor"></iframe>

<footer>
Uso interno â€“ Austral Group S.A.A.
</footer>

</div>

<script>
const usuario = "produccionchiag-art";
const repo = "hojasdeseguridad";

const categorias = {
  insumos: "pdf/insumos",
  pintura: "pdf/pintura",
  combustibles: "pdf/combustibles"
};

function cargar(cat, carpeta){

  fetch(`https://api.github.com/repos/${usuario}/${repo}/contents/${carpeta}`)
  .then(r=>r.json())
  .then(data=>{

    const sel=document.getElementById(cat);
    sel.innerHTML='<option value="">Seleccione hoja</option>';

    data.forEach(f=>{
      if(f.name.endsWith(".pdf")){
        const o=document.createElement("option");
        o.value=f.download_url;
        o.textContent=f.name.replace(".pdf","").replace(/_/g," ");
        sel.appendChild(o);
      }
    });

  });
}

for(const c in categorias){
  cargar(c,categorias[c]);
}

document.querySelectorAll("select").forEach(s=>{
  s.addEventListener("change",function(){
    if(this.value){
      visor.src="https://docs.google.com/gview?embedded=true&url="+this.value;
    }
  });
});
</script>

</body>
</html>
